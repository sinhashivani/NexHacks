# Visual Layout Guide

## Before vs After

### BEFORE: Single Column, Tall Outlet Section
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Trade Assistant        [âœ•]    â”‚ â† Header (fixed)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CURRENT EVENT                      â”‚ â† Big block
â”‚ "Will Bitcoin reach $100k..."      â”‚
â”‚ https://polymarket.com/market...   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ OUTLET STANCE                      â”‚ â† Tall stacked cards
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ WSJ              Support 85% â”‚   â”‚
â”‚ â”‚ Recent analysis aligns...    â”‚   â”‚
â”‚ â”‚ Confidence: 85%              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Bloomberg        Support 78% â”‚   â”‚
â”‚ â”‚ Market momentum indicators.. â”‚   â”‚
â”‚ â”‚ Confidence: 78%              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Reuters           Neutral 65% â”‚  â”‚
â”‚ â”‚ Mixed signals from...        â”‚   â”‚
â”‚ â”‚ Confidence: 65%              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ FT               Neutral 72%  â”‚  â”‚
â”‚ â”‚ Consensus suggests...        â”‚   â”‚
â”‚ â”‚ Confidence: 72%              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ KEY VOICES                         â”‚ â† Limited space
â”‚ [2 analyst cards]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Similar Trades                     â”‚ â† Only 20-30% space
â”‚ If you like YES (Buy)              â”‚
â”‚ - Bitcoin at $100k... (85%)        â”‚
â”‚ - Crypto regulatory... (72%)       â”‚
â”‚ [Need to scroll more]              â”‚
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Problem**: Takes up 50%+ space just for outlets, constrains Similar Trades

---

### AFTER: Compact Headers + Two-Column (Wide) / Single-Column (Narrow)

#### A) Docked Mode with Width â‰¥ 600px (TWO-COLUMN)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Trade Assistant                              [âœ•]    â”‚ â† Fixed header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  LEFT 30%           â”‚  RIGHT 70%                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CURRENT EVENT  â”‚ â”‚  â”‚   SIMILAR TRADES             â”‚  â”‚
â”‚  â”‚ (2-line title) â”‚ â”‚  â”‚ (SCROLLABLE - MAIN FOCUS)    â”‚  â”‚
â”‚  â”‚ (1-line URL)   â”‚ â”‚  â”‚                              â”‚  â”‚
â”‚  â”‚                â”‚ â”‚  â”‚ If you like YES (Buy)        â”‚  â”‚
â”‚  â”‚ SOURCES        â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”   â”‚ â”‚  â”‚ â”‚ Bitcoin $100k?    85%    â”‚ â”‚  â”‚
â”‚  â”‚ â”‚WSâ”‚â”‚BBâ”‚â”‚RTâ”‚   â”‚ â”‚  â”‚ â”‚ Similar YES exposure     â”‚ â”‚  â”‚
â”‚  â”‚ â”‚J â”‚â”‚G â”‚â”‚R â”‚   â”‚ â”‚  â”‚ â”‚ [Open] [Add to basket]   â”‚ â”‚  â”‚
â”‚  â”‚ â”‚âœ“ â”‚â”‚âœ“ â”‚â”‚~â”‚   â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”‚85â”‚â”‚78â”‚â”‚65â”‚   â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜   â”‚ â”‚  â”‚ â”‚ GDP Growth 2%?    72%    â”‚ â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”   â”‚ â”‚  â”‚ â”‚ Complements YES profile  â”‚ â”‚  â”‚
â”‚  â”‚ â”‚FTâ”‚â”‚CBâ”‚â”‚ECâ”‚   â”‚ â”‚  â”‚ â”‚ [Open] [Add to basket]   â”‚ â”‚  â”‚
â”‚  â”‚ â”‚~ â”‚â”‚âœ— â”‚â”‚âœ— â”‚   â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ â”‚72â”‚â”‚68â”‚â”‚75â”‚   â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜   â”‚ â”‚  â”‚ â”‚ Fed Rate Cut Q2?  80%    â”‚ â”‚  â”‚
â”‚  â”‚ [scrollable]   â”‚ â”‚  â”‚ â”‚ Curve inversion signal   â”‚ â”‚  â”‚
â”‚  â”‚                â”‚ â”‚  â”‚ â”‚ [Open] [Add to basket]   â”‚ â”‚  â”‚
â”‚  â”‚ KEY VOICES     â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚ [2 analysts]   â”‚ â”‚  â”‚ [... more trades below ...]  â”‚  â”‚
â”‚  â”‚                â”‚ â”‚  â”‚                              â”‚  â”‚
â”‚  â”‚[scroll area]   â”‚ â”‚  â”‚ If you like NO (Sell)        â”‚  â”‚
â”‚  â”‚                â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ Inflation stays 3%? 70% â”‚ â”‚  â”‚
â”‚                     â”‚  â”‚ â”‚ Bearish headwinds      â”‚ â”‚  â”‚
â”‚                     â”‚  â”‚ â”‚ [Open] [Add to basket] â”‚ â”‚  â”‚
â”‚                     â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                     â”‚  â”‚ [... more trades ...]    â”‚  â”‚
â”‚                     â”‚  â”‚[scrollable independently]â”‚  â”‚
â”‚                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Benefits**:
- âœ… Context header (left) always visible while scrolling trades
- âœ… Similar trades get ~70% of panel width
- âœ… Compact outlet boxes (6 visible) with hover tooltips
- âœ… Left and right columns independently scrollable

---

#### B) Docked Mode with Width < 600px OR Floating Mode (SINGLE-COLUMN)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trade Assistant          [âœ•]   â”‚ â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CURRENT EVENT                   â”‚ â† Compact (2-line title)
â”‚ "Will Bitcoin..."               â”‚
â”‚ polymarket.com/...              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SOURCES (grid, responsive)      â”‚ â† 6 outlets in compact boxes
â”‚ â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â”                  â”‚
â”‚ â”‚WSâ”‚ â”‚BBâ”‚ â”‚RTâ”‚                  â”‚
â”‚ â”‚J â”‚ â”‚G â”‚ â”‚R â”‚                  â”‚
â”‚ â”‚âœ“ â”‚ â”‚âœ“ â”‚ â”‚~ â”‚                  â”‚
â”‚ â”‚85â”‚ â”‚78â”‚ â”‚65â”‚                  â”‚
â”‚ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜                  â”‚
â”‚ â”Œâ”€â”€â” â”Œâ”€â”€â” â”Œâ”€â”€â”                  â”‚
â”‚ â”‚FTâ”‚ â”‚CBâ”‚ â”‚ECâ”‚                  â”‚
â”‚ â”‚~ â”‚ â”‚âœ— â”‚ â”‚âœ— â”‚                  â”‚
â”‚ â”‚72â”‚ â”‚68â”‚ â”‚75â”‚                  â”‚
â”‚ â””â”€â”€â”˜ â””â”€â”€â”˜ â””â”€â”€â”˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ KEY VOICES                      â”‚ â† Compressed
â”‚ A. Chen (Macro Analyst)         â”‚
â”‚ "Fed policy pivot creates..."   â”‚
â”‚ M. Rivera (Rates Trader)        â”‚
â”‚ "Curve inversion signals..."    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Similar Trades                  â”‚ â† Gets majority of remaining space
â”‚ If you like YES (Buy)           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Bitcoin $100k?         85%  â”‚ â”‚
â”‚ â”‚ Similar YES exposure        â”‚ â”‚
â”‚ â”‚ [Open] [Add to basket]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ GDP Growth 2%          72%  â”‚ â”‚
â”‚ â”‚ Complements YES profile     â”‚ â”‚
â”‚ â”‚ [Open] [Add to basket]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [scrollable]                    â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Hover States on Source Boxes

### Normal State
```
â”Œâ”€â”€â”
â”‚WSâ”‚  â† Border color: green (#4caf50)
â”‚J â”‚  â† Background: rgba(255,255,255,0.06)
â”‚âœ“ â”‚  â† Stance icon
â”‚85â”‚  â† Confidence %
â””â”€â”€â”˜
```

### Hover State
```
â”Œâ”€â”€â”
â”‚WSâ”‚  â† Border: green, stays
â”‚J â”‚  â† Background: rgba(255,255,255,0.12) [brightens]
â”‚âœ“ â”‚  â† Lifted up 2px (translateY(-2px))
â”‚85â”‚  â† Box-shadow: green glow
â””â”€â”€â”˜    â† Cursor: pointer
        â† Tooltip shows: "https://wsj.com"
```

### Click
```
â†’ Opens https://wsj.com in new background tab
â†’ Uses chrome.runtime.sendMessage for safe opening
â†’ URL validated (http/https only)
â†’ No popup blockers
```

---

## Stance Colors Reference

| Stance | Color | RGB | Hex |
|--------|-------|-----|-----|
| Support | ğŸŸ¢ Green | rgb(76, 175, 80) | #4caf50 |
| Oppose | ğŸ”´ Red | rgb(244, 67, 54) | #f44336 |
| Neutral | ğŸŸ  Orange | rgb(255, 152, 0) | #ff9800 |

Applied as:
- **Border color** on source boxes
- **Text color** for stance label
- **Box-shadow** on hover

---

## Layout Breakpoints

| Mode | Width | Layout |
|------|-------|--------|
| Docked | â‰¥600px | **Two-column** (30/70) |
| Docked | <600px | **Single-column** |
| Floating | Any | **Single-column** |

Two-column layout automatically activates when:
```javascript
state.layoutMode === 'docked' && state.width >= 600px
```

---

## Responsive Grid for Source Boxes

```css
display: grid;
grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
gap: 6px;
```

**Result:**
- Each box: 70px minimum width
- Wraps to multiple rows automatically
- Fills available space with equal-width columns
- 6 outlets shown: 3 per row (on 240px+ width) â†’ 2-3 rows

Example at different widths:
```
240px wide: 3 columns
â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”
â”‚WSâ”‚â”‚BBâ”‚â”‚RTâ”‚
â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜
â”Œâ”€â”€â”â”Œâ”€â”€â”â”Œâ”€â”€â”
â”‚FTâ”‚â”‚CBâ”‚â”‚ECâ”‚
â””â”€â”€â”˜â””â”€â”€â”˜â””â”€â”€â”˜

180px wide: 2 columns  
â”Œâ”€â”€â”â”Œâ”€â”€â”
â”‚WSâ”‚â”‚BBâ”‚
â””â”€â”€â”˜â””â”€â”€â”˜
â”Œâ”€â”€â”â”Œâ”€â”€â”
â”‚RTâ”‚â”‚FTâ”‚
â””â”€â”€â”˜â””â”€â”€â”˜
â”Œâ”€â”€â”â”Œâ”€â”€â”
â”‚CBâ”‚â”‚ECâ”‚
â””â”€â”€â”˜â””â”€â”€â”˜

120px wide: 1 column
â”Œâ”€â”€â”
â”‚WSâ”‚
â””â”€â”€â”˜
â”Œâ”€â”€â”
â”‚BBâ”‚
â””â”€â”€â”˜
...
```

---

## Space Allocation (Two-Column Mode)

```
Total width: 800px (example)
â”œâ”€ Left column (30%): 240px
â”‚  â”œâ”€ Current Event: ~40px height
â”‚  â”œâ”€ Sources grid: ~80px height (2 rows Ã— 40px)
â”‚  â””â”€ Key Voices: ~100px height
â”‚  â””â”€ Scroll area: ~240px height
â”‚
â””â”€ Right column (70%): 560px
   â”œâ”€ Header: ~50px
   â”œâ”€ YES ideas: ~200px
   â”œâ”€ NO ideas: ~200px
   â””â”€ Scroll area: ~500px visible, unlimited scrollable

```

**Result**: Similar Trades section gets ~70% horizontal space + full independent scrolling

---

## No More Layout Jank

âœ… **Before**: Viewport-width changes caused UI reflow
âœ… **After**: Responsive breakpoint (600px) handles gracefully
âœ… **Smooth transitions**: CSS transforms (no layout recalc)
âœ… **Independent scrolling**: Both columns scroll without affecting other
âœ… **Fixed header**: Always visible while scrolling content

---

## Implementation Files

Modified:
1. âœ… `src/utils/contextData.ts` - Added URLs
2. âœ… `src/components/ContextHeader.tsx` - Redesigned layout
3. âœ… `src/components/FloatingAssistant.tsx` - Two-column logic
4. âœ… `src/background/background.ts` - Safe URL opening

No changes to:
- DirectionalIdeas.tsx (content unchanged)
- FloatingAssistant.css (still valid)
- Content script positioning logic

---

**Status**: âœ… Ready to build and test

```bash
npm run build
```

Then load in Chrome and test the new layouts!
